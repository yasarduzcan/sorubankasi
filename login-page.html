<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Başarı UZEM - Giriş</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        function LoginPage() {
            const [email, setEmail] = React.useState('');
            const [password, setPassword] = React.useState('');
            const [error, setError] = React.useState(null);

            const handleRegister = (e) => {
                e.preventDefault();
                
                if (!email.includes('@')) {
                    setError('Geçerli bir email adresi girin');
                    return;
                }

                const users = JSON.parse(localStorage.getItem('users') || '[]');
                
                const existingUser = users.find(user => user.email === email);
                if (existingUser) {
                    setError('Bu email adresi zaten kayıtlı');
                    return;
                }

                // Admin kontrolü
                const isAdmin = email.toLowerCase().includes('admin');

                const newUser = {
                    id: Date.now().toString(),
                    email,
                    password,
                    approved: isAdmin, // Admin otomatik onaylı
                    role: isAdmin ? 'admin' : 'user'
                };

                users.push(newUser);
                localStorage.setItem('users', JSON.stringify(users));
                
                setError('Kayıt başarılı. ' + (isAdmin ? 'Admin hesabı oluşturuldu.' : 'Yönetici onayı bekleniyor.'));
            };

            const handleLogin = (e) => {
                e.preventDefault();
                
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                
                const user = users.find(
                    u => u.email === email && u.password === password
                );

                if (!user) {
                    setError('Kullanıcı bulunamadı');
                    return;
                }

                // Admin kontrolü
                if (user.role === 'admin') {
                    window.location.href = 'admin-panel.html';
                    return;
                }

                // Normal kullanıcı için onay kontrolü
                if (!user.approved) {
                    setError('Hesabınız henüz yönetici tarafından onaylanmadı');
                    return;
                }

                // Onaylı kullanıcı ise panel.html'ye yönlendir
                window.location.href = 'panel.html';
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-100 to-blue-300 flex items-center justify-center px-4">
                    <div className="bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden">
                        <div className="bg-blue-600 py-6 text-center">
                            <img 
                                src="images/uzem1.png" 
                                alt="Başarı UZEM Logo" 
                                className="mx-auto h-24 w-auto object-contain"
                            />
                        </div>
                        
                        <form className="p-8 space-y-6">
                            {error && (
                                <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg text-center">
                                    {error}
                                </div>
                            )}

                            <div>
                                <label className="block text-gray-700 font-semibold mb-2">
                                    Email Adresi
                                </label>
                                <input
                                    type="email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    placeholder="email@example.com"
                                    className="w-full px-4 py-3 rounded-lg bg-gray-100 border focus:border-blue-500 focus:bg-white focus:outline-none"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-gray-700 font-semibold mb-2">
                                    Şifre
                                </label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    placeholder="••••••••"
                                    className="w-full px-4 py-3 rounded-lg bg-gray-100 border focus:border-blue-500 focus:bg-white focus:outline-none"
                                    required
                                />
                            </div>

                            <div className="flex space-x-4">
                                <button
                                    onClick={handleRegister}
                                    className="w-1/2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition duration-300 font-semibold"
                                >
                                    Kayıt Ol
                                </button>
                                <button
                                    onClick={handleLogin}
                                    className="w-1/2 bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition duration-300 font-semibold"
                                >
                                    Giriş Yap
                                </button>
                            </div>

                            <div className="text-center text-gray-500 text-sm">
                                © {new Date().getFullYear()} Başarı UZEM. Tüm hakları saklıdır.
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<LoginPage />, document.getElementById('root'));
    </script>
</body>
</html>
